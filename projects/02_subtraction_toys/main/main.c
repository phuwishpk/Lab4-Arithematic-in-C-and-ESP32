#include <stdio.h>
#include "esp_log.h"
#include "freertos/FreeRTOS.h"
#include "freertos/task.h"

// ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡∏∑‡πà‡∏≠ TAG ‡πÉ‡∏´‡πâ‡∏™‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô
static const char *TAG = "TOYS_CHALLENGE";

void app_main(void)
{
    ESP_LOGI(TAG, "üß∏ ‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏ï‡∏∞‡∏•‡∏∏‡∏¢‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏Ç‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏ô‡∏Ç‡∏≠‡∏á‡∏ô‡πâ‡∏≠‡∏á üß∏");
    ESP_LOGI(TAG, "========================================");

    // --- ‡πÄ‡∏£‡∏¥‡πà‡∏°: ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î‡∏ó‡∏µ‡πà 1 ---
    // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ç‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏ô‡∏ï‡∏≤‡∏°‡πÇ‡∏à‡∏ó‡∏¢‡πå
    int toys_at_home = 15;      // ‡∏Ç‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏ô‡∏ó‡∏µ‡πà‡∏ö‡πâ‡∏≤‡∏ô (‡πÄ‡∏î‡∏¥‡∏° 8)
    int toys_give_away = 7;     // ‡∏Ç‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏à‡∏Å (‡πÄ‡∏î‡∏¥‡∏° 3)
    int toys_remaining;         // ‡∏Ç‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠
    // --- ‡∏à‡∏ö: ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î‡∏ó‡∏µ‡πà 1 ---

    ESP_LOGI(TAG, "üìñ ‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏´‡∏•‡∏±‡∏Å:");
    ESP_LOGI(TAG, "   ‡∏ô‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏Ç‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏ô: %d ‡∏ä‡∏¥‡πâ‡∏ô", toys_at_home);
    ESP_LOGI(TAG, "   ‡πÄ‡∏≠‡∏≤‡πÑ‡∏õ‡πÅ‡∏à‡∏Å‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô: %d ‡∏ä‡∏¥‡πâ‡∏ô", toys_give_away);
    ESP_LOGI(TAG, "");

    vTaskDelay(2000 / portTICK_PERIOD_MS);

    // --- ‡πÄ‡∏£‡∏¥‡πà‡∏°: ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î‡∏ó‡∏µ‡πà 2 ---
    // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏Ç‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏ô‡∏û‡∏≠‡πÅ‡∏à‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
    ESP_LOGI(TAG, "üîç ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡πÅ‡∏à‡∏Å:");
    if (toys_at_home >= toys_give_away) {
        ESP_LOGI(TAG, "   ‚úÖ ‡∏Ç‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏ô‡∏û‡∏≠‡πÅ‡∏à‡∏Å");
        // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå (‡∏Å‡∏≤‡∏£‡∏•‡∏ö)
        toys_remaining = toys_at_home - toys_give_away;
        ESP_LOGI(TAG, "   ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏Ç‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏ô %d - %d = %d ‡∏ä‡∏¥‡πâ‡∏ô", 
                 toys_at_home, toys_give_away, toys_remaining);

    } else {
        ESP_LOGI(TAG, "   ‚ùå ‡∏Ç‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏ô‡πÑ‡∏°‡πà‡∏û‡∏≠! ‡∏Ç‡∏≤‡∏î‡πÑ‡∏õ %d ‡∏ä‡∏¥‡πâ‡∏ô", 
                 toys_give_away - toys_at_home);
        // ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏û‡∏≠‡πÅ‡∏à‡∏Å ‡∏à‡∏∞‡∏ñ‡∏∑‡∏≠‡∏ß‡πà‡∏≤‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏ó‡πà‡∏≤‡πÄ‡∏î‡∏¥‡∏°
        toys_remaining = toys_at_home; 
        ESP_LOGW(TAG, "   ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏à‡∏Å‡πÑ‡∏î‡πâ ‡∏ô‡πâ‡∏≠‡∏á‡∏à‡∏∂‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏Ç‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏ô %d ‡∏ä‡∏¥‡πâ‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡πÄ‡∏î‡∏¥‡∏°", toys_remaining);
    }
    ESP_LOGI(TAG, "");
    // --- ‡∏à‡∏ö: ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î‡∏ó‡∏µ‡πà 2 ---

    vTaskDelay(2000 / portTICK_PERIOD_MS);

    // --- ‡πÄ‡∏£‡∏¥‡πà‡∏°: ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î‡∏ó‡∏µ‡πà 3 ---
    // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏ô‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏≠‡∏∑‡πà‡∏ô‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ú‡∏•‡∏£‡∏ß‡∏°
    ESP_LOGI(TAG, "üß© ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏ô‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏≠‡∏∑‡πà‡∏ô:");
    int dolls = 5;      // ‡∏ï‡∏∏‡πä‡∏Å‡∏ï‡∏≤
    int robots = 2;     // ‡∏´‡∏∏‡πà‡∏ô‡∏¢‡∏ô‡∏ï‡πå
    int total_toys = toys_at_home + dolls + robots; // ‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏≤ toys_at_home ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà

    ESP_LOGI(TAG, "   ü™Ü ‡∏ï‡∏∏‡πä‡∏Å‡∏ï‡∏≤: %d ‡∏ï‡∏±‡∏ß", dolls);
    ESP_LOGI(TAG, "   ü§ñ ‡∏´‡∏∏‡πà‡∏ô‡∏¢‡∏ô‡∏ï‡πå: %d ‡∏ï‡∏±‡∏ß", robots);
    ESP_LOGI(TAG, "   üéØ ‡∏£‡∏ß‡∏°‡∏Ç‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏ô‡∏ó‡∏∏‡∏Å‡∏ä‡∏ô‡∏¥‡∏î‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ: %d + %d + %d = %d ‡∏ä‡∏¥‡πâ‡∏ô",
             toys_at_home, dolls, robots, total_toys);
    ESP_LOGI(TAG, "");
    // --- ‡∏à‡∏ö: ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î‡∏ó‡∏µ‡πà 3 ---

    vTaskDelay(2000 / portTICK_PERIOD_MS);

    // --- ‡πÄ‡∏£‡∏¥‡πà‡∏°: ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î‡∏ó‡∏µ‡πà 4 ---
    // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÉ‡∏´‡πâ‡∏Ñ‡∏¥‡∏î
    ESP_LOGI(TAG, "ü§î ‡πÇ‡∏à‡∏ó‡∏¢‡πå‡πÉ‡∏´‡πâ‡∏Ñ‡∏¥‡∏î:");
    ESP_LOGI(TAG, "   ‡∏´‡∏≤‡∏Å‡∏ô‡πâ‡∏≠‡∏á‡∏≠‡∏¢‡∏≤‡∏Å‡πÅ‡∏à‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô 10 ‡∏Ñ‡∏ô ‡∏Ñ‡∏ô‡∏•‡∏∞ 2 ‡∏ä‡∏¥‡πâ‡∏ô...");
    
    int friends = 10;
    int toys_per_friend = 2;
    int toys_needed = friends * toys_per_friend;
    int toys_available = 15; // ‡∏à‡∏≤‡∏Å‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏ó‡∏µ‡πà‡∏ß‡πà‡∏≤ "‡∏ñ‡πâ‡∏≤‡∏°‡∏µ 15 ‡∏ä‡∏¥‡πâ‡∏ô"
    
    ESP_LOGI(TAG, "   1. ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏Ç‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: %d x %d = %d ‡∏ä‡∏¥‡πâ‡∏ô", 
             friends, toys_per_friend, toys_needed);

    if (toys_available < toys_needed) {
        int toys_shortage = toys_needed - toys_available;
        ESP_LOGI(TAG, "   2. ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ %d ‡∏ä‡∏¥‡πâ‡∏ô ‡∏à‡∏∞‡∏Ç‡∏≤‡∏î‡∏≠‡∏µ‡∏Å: %d - %d = %d ‡∏ä‡∏¥‡πâ‡∏ô",
                 toys_available, toys_needed, toys_available, toys_shortage);
    } else {
        ESP_LOGI(TAG, "   2. ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ %d ‡∏ä‡∏¥‡πâ‡∏ô ‡∏Ç‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏ô‡∏à‡∏∞‡∏û‡∏≠‡∏î‡∏µ‡∏´‡∏£‡∏∑‡∏≠‡∏û‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏à‡∏Å", toys_available);
    }
    ESP_LOGI(TAG, "");
    // --- ‡∏à‡∏ö: ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î‡∏ó‡∏µ‡πà 4 ---

    ESP_LOGI(TAG, "üéâ ‡∏à‡∏ö‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏ï‡∏∞‡∏•‡∏∏‡∏¢‡πÇ‡∏à‡∏ó‡∏¢‡πå!");
}
